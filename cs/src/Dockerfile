FROM flexhamp/test-task:latest

WORKDIR /usr/src/app

COPY package*.json ./

RUN npm install && \
  echo Installed

COPY . .

ENV NODE_ENV=production

ARG ORACLEDB_USER
ARG ORACLEDB_PASSWORD
ARG ORACLEDB_CONNECTIONSTRING
ARG ORACLEDB_POOL_MIN
ARG ORACLEDB_POOL_INCREMENT

ARG LOGGER_LEVEL

ENV ORACLEDB_USER=${ORACLEDB_USER}
ENV ORACLEDB_PASSWORD=${ORACLEDB_PASSWORD}
ENV ORACLEDB_CONNECTIONSTRING=${ORACLEDB_CONNECTIONSTRING}
ENV ORACLEDB_POOL_MIN=${ORACLEDB_POOL_MIN}
ENV ORACLEDB_POOL_INCREMENT=${ORACLEDB_POOL_INCREMENT}

ENV LOGGER_LEVEL=${LOGGER_LEVEL}

EXPOSE 3000

CMD ["node", "index.js"]
